{"ast":null,"code":"import React,{useState,useEffect}from'react';import useWebSocket from'react-use-websocket';import ChartComponent from'./Components/ChartComponent';import SymbolToggle from'./Components/CryptoToggle';import IntervalToggle from'./Components/IntervalToggle';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const symbols=['ethusdt','bnbusdt','dotusdt'];const intervals=['1m','3m','5m'];const App=()=>{const[selectedSymbol,setSelectedSymbol]=useState(()=>{return localStorage.getItem('selectedSymbol')||'ethusdt';});const[selectedInterval,setSelectedInterval]=useState(()=>{return localStorage.getItem('selectedInterval')||'1m';});const[priceData,setPriceData]=useState(()=>{// Load existing price data from local storage or initialize as empty\nconst storedData=localStorage.getItem('priceData');return storedData?JSON.parse(storedData):{};});const{lastJsonMessage}=useWebSocket(`wss://stream.binance.com:9443/ws/${selectedSymbol}@kline_${selectedInterval}`,{shouldReconnect:()=>true});useEffect(()=>{if(lastJsonMessage&&lastJsonMessage.k){const candlestick=lastJsonMessage.k;setPriceData(prevData=>{const newData={...prevData,[selectedSymbol]:[...(prevData[selectedSymbol]||[]),{x:new Date(candlestick.t),o:parseFloat(candlestick.o),h:parseFloat(candlestick.h),l:parseFloat(candlestick.l),c:parseFloat(candlestick.c)}]};// Save updated price data to local storage\nlocalStorage.setItem('priceData',JSON.stringify(newData));return newData;});}},[lastJsonMessage,selectedSymbol]);const handleSymbolChange=symbol=>{setSelectedSymbol(symbol);localStorage.setItem('selectedSymbol',symbol);// Save to local storage\n};const handleIntervalChange=interval=>{setSelectedInterval(interval);localStorage.setItem('selectedInterval',interval);// Save to local storage\n};return/*#__PURE__*/_jsx(\"div\",{className:\"h-screen w-screen bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 text-white p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-5xl mx-auto bg-gray-900 shadow-xl rounded-lg overflow-hidden p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center mb-6\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/Images/Logo.jpg\",alt:\"Logo\",className:\"w-12 h-12 mr-4 rounded-full border border-gray-700 shadow-sm\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-extrabold tracking-wider text-gray-100\",children:\"Binance Market Data\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center space-x-6 mb-8\",children:[/*#__PURE__*/_jsx(SymbolToggle,{selectedSymbol:selectedSymbol,onSymbolChange:handleSymbolChange,symbols:symbols}),/*#__PURE__*/_jsx(IntervalToggle,{selectedInterval:selectedInterval,onIntervalChange:handleIntervalChange,intervals:intervals})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 p-6 rounded-lg shadow-inner\",children:/*#__PURE__*/_jsx(ChartComponent,{priceData:priceData[selectedSymbol]||[],selectedSymbol:selectedSymbol})})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useWebSocket","ChartComponent","SymbolToggle","IntervalToggle","jsx","_jsx","jsxs","_jsxs","symbols","intervals","App","selectedSymbol","setSelectedSymbol","localStorage","getItem","selectedInterval","setSelectedInterval","priceData","setPriceData","storedData","JSON","parse","lastJsonMessage","shouldReconnect","k","candlestick","prevData","newData","x","Date","t","o","parseFloat","h","l","c","setItem","stringify","handleSymbolChange","symbol","handleIntervalChange","interval","className","children","src","alt","onSymbolChange","onIntervalChange"],"sources":["E:/StoryOff/Binance-Market-Data-WebSocket-Implementation/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport useWebSocket from 'react-use-websocket';\r\nimport ChartComponent from './Components/ChartComponent';\r\nimport SymbolToggle from './Components/CryptoToggle';\r\nimport IntervalToggle from './Components/IntervalToggle';\r\n\r\nconst symbols = ['ethusdt', 'bnbusdt', 'dotusdt'];\r\nconst intervals = ['1m', '3m', '5m'];\r\n\r\nconst App = () => {\r\n  const [selectedSymbol, setSelectedSymbol] = useState(() => {\r\n    return localStorage.getItem('selectedSymbol') || 'ethusdt';\r\n  });\r\n  const [selectedInterval, setSelectedInterval] = useState(() => {\r\n    return localStorage.getItem('selectedInterval') || '1m';\r\n  });\r\n  const [priceData, setPriceData] = useState(() => {\r\n    // Load existing price data from local storage or initialize as empty\r\n    const storedData = localStorage.getItem('priceData');\r\n    return storedData ? JSON.parse(storedData) : {};\r\n  });\r\n\r\n  const { lastJsonMessage } = useWebSocket(\r\n    `wss://stream.binance.com:9443/ws/${selectedSymbol}@kline_${selectedInterval}`,\r\n    {\r\n      shouldReconnect: () => true,\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (lastJsonMessage && lastJsonMessage.k) {\r\n      const candlestick = lastJsonMessage.k;\r\n      setPriceData((prevData) => {\r\n        const newData = {\r\n          ...prevData,\r\n          [selectedSymbol]: [\r\n            ...(prevData[selectedSymbol] || []),\r\n            {\r\n              x: new Date(candlestick.t),\r\n              o: parseFloat(candlestick.o),\r\n              h: parseFloat(candlestick.h),\r\n              l: parseFloat(candlestick.l),\r\n              c: parseFloat(candlestick.c),\r\n            },\r\n          ],\r\n        };\r\n        // Save updated price data to local storage\r\n        localStorage.setItem('priceData', JSON.stringify(newData));\r\n        return newData;\r\n      });\r\n    }\r\n  }, [lastJsonMessage, selectedSymbol]);\r\n\r\n  const handleSymbolChange = (symbol) => {\r\n    setSelectedSymbol(symbol);\r\n    localStorage.setItem('selectedSymbol', symbol); // Save to local storage\r\n  };\r\n\r\n  const handleIntervalChange = (interval) => {\r\n    setSelectedInterval(interval);\r\n    localStorage.setItem('selectedInterval', interval); // Save to local storage\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-screen w-screen bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 text-white p-8\">\r\n      <div className=\"max-w-5xl mx-auto bg-gray-900 shadow-xl rounded-lg overflow-hidden p-8\">\r\n        {/* Logo and Title */}\r\n        <div className=\"flex items-center justify-center mb-6\">\r\n          <img \r\n            src=\"/Images/Logo.jpg\" \r\n            alt=\"Logo\" \r\n            className=\"w-12 h-12 mr-4 rounded-full border border-gray-700 shadow-sm\"\r\n          />\r\n          <h1 className=\"text-4xl font-extrabold tracking-wider text-gray-100\">\r\n            Binance Market Data\r\n          </h1>\r\n        </div>\r\n\r\n        {/* Symbol and Interval Toggles */}\r\n        <div className=\"flex justify-center items-center space-x-6 mb-8\">\r\n          <SymbolToggle\r\n            selectedSymbol={selectedSymbol}\r\n            onSymbolChange={handleSymbolChange}\r\n            symbols={symbols}\r\n          />\r\n          <IntervalToggle\r\n            selectedInterval={selectedInterval}\r\n            onIntervalChange={handleIntervalChange}\r\n            intervals={intervals}\r\n          />\r\n        </div>\r\n\r\n        {/* Chart */}\r\n        <div className=\"bg-gray-800 p-6 rounded-lg shadow-inner\">\r\n          <ChartComponent\r\n            priceData={priceData[selectedSymbol] || []}\r\n            selectedSymbol={selectedSymbol}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}